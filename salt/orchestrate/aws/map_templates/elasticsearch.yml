elasticsearch:
  {% for id_num in range(3) %}
  - elasticsearch-{{ environment_name }}-{{ id_num }}:
      network_interfaces:
        - DeviceIndex: 0
          AssociatePublicIpAddress: True
          SubnetId: {{ subnetids[id_num] }}
          SecurityGroupId: {{ securitygroupid }}
      block_device_mappings:
        - DeviceName: /dev/xvda
          Ebs.VolumeSize: 200
          Ebs.VolumeType: gp2
      tag:
        environment: {{ environment_name }}
        role: elasticsearch
      grains:
        environment: {{ environment_name }}
        roles: {{ roles }}
  {% endfor %}
